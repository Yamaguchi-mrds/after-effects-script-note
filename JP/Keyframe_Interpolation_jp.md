# AfterEffectsキーフレーム補間について

## ✍️ 概要
After Effects でスクリプトから **easeKeyFrame のデータをコピーペースト** する際、  
どの情報を一緒に移動させるべきかを整理していたところ、候補として **「Temporal / Spatial / Roving」** の3つが挙がった。  

各補間方式やフラグの意味を改めて整理し、自分用の学習ノートとしてまとめた。  

---

## 📌 Temporal Interpolation（時間補間）について
- **対象**：すべてのプロパティ（Position / Opacity / Scale など）  
- **役割**：時間に沿った「値の変化の仕方」を決める  
- **影響先**：スピードグラフ  

### 種類と挙動
- **Linear（リニア）**  
  アイコン：菱形  
  値が一定速度で変化する。シンプルに直線的な補間。  

- **Bezier（ベジェ）**  
  アイコン：菱形（ハンドル調整可）  
  手動でイーズをかけられる。緩急を自由にコントロールできる。  

- **Continuous Bezier（コンティニュアス・ベジェ）**  
  アイコン：菱形  
  両側のハンドル角度が自動的に一直線に揃う。滑らかさを維持しながら緩急を調整できる。  

- **Auto Bezier（オート・ベジェ）**  
  アイコン：小さい丸  
  AEが自動で最も自然な速度カーブを設定。ユーザーが操作すると Continuous に変わる。  

- **Hold（ホールド）**  
  アイコン：四角  
  値を保持し、次のキーフレーム直前で急に切り替わる。  

### 遷移ルール
- Auto →（触る）→ Continuous  
- Continuous →（片側ハンドル操作）→ Bezier  
- Alt＋クリック → Linear ⇔ Bezier  
- Hold は明示的に設定（自然遷移はなし）  

### アイコンの区別
- Linear / Bezier / Continuous → 菱形  
- Auto Bezier → 小さい丸（ロービングと似てるが小さい）  
- Roving → 大きい丸（別枠：時間位置の自動調整）  
- Hold → 四角  

### 👉 Temporal Interpolationまとめ
- Linear：直線・一定速度  
- Bezier：自由イーズ  
- Continuous：滑らか制約つきイーズ（角度は揃う、長さ自由）  
- Auto：AEおまかせ。触るとContinuous化  
- Hold：保持→ジャンプ  

> Temporal は「値 × 時間の変化カーブ」、Spatial は「経路の形状カーブ」と対になる考え方。  

---

## 📌 Spatial Interpolation（空間補間）について
- **対象**：Position 系プロパティ専用（モーションパスに影響）  
- **役割**：オブジェクトが「どの経路を通るか」を決める  

### 種類と挙動
- **Linear（リニア）**  
  ハンドル：なし  
  経路は直線でつながる。角ばった動きになる。  

- **Bezier（ベジェ）**  
  ハンドル：In / Out 独立  
  両側のハンドルを別々に操作できる。自由に曲げられる。  

- **Continuous Bezier（コンティニュアス・ベジェ）**  
  ハンドル：角度は連続 / 長さは独立  
  両側のハンドル角度が常に一直線に揃う。滑らかさを維持したまま調整可能。  

- **Auto Bezier（オート・ベジェ）**  
  ハンドル：AEが自動制御  
  角度も長さも自動で最適化される。触ると Continuous に切り替わる。  

### 遷移ルール（AEの仕様）
- Auto →（ハンドル操作）→ Continuous  
- Continuous →（片側ハンドル操作）→ Bezier  
- Alt＋クリック → Linear ⇔ Bezier  
- Bezier → Continuous に戻す → 右クリック or スクリプトで指定  

### 内部データ
- **keyInSpatialTangent / keyOutSpatialTangent**  
  - `[dx, dy]`（または3Dなら `[dx, dy, dz]`）のベクトル  
  - 方向（角度）＋長さ（インフルエンス）を含む  
  - UIには数値が表示されず、ハンドルの見た目で操作する  

### 👉 Spatial Interpolationまとめ
- Spatial = 「軌跡線のカーブ」  
- Linear → 曲がらない  
- Bezier → 自由  
- Continuous → 滑らか制約付き自由  
- Auto → AEおまかせ（触るとContinuous化）  

---

## 🟧 Roving（ロービング）について
- **対象**：主に位置アニメーション（他プロパティでも設定可）  
- **役割**：時間軸（横軸）の位置をAEが自動調整してくれる機能  
- **目的**：全体のスピードを均一にしたり、滑らかに分配する  

### 挙動
- 通常のキーフレームは「時間位置が固定」されている  
- Roving にすると時間の固定が外れて “流動的” になる  
- AE が「全体の速度をなるべく一定に保つ」ように再配置する  

### アイコン
- 通常キーフレーム → 菱形（Linear/Bezier/Continuous）、小さい丸（Auto）、四角（Hold）  
- Roving キーフレーム → 大きい丸  
  - Auto Bezier（小さい丸）と見た目が似ているので注意  
  - 違いは「丸の大きさ」  

### 使いどころ
- 位置アニメーションのモーションパスで  
  「途中のキーはAEに任せて、全体の速度を一定にしたい」時に便利  
- 例：車が道を走る → 始点と終点を決めて、中間点は「速度均等」で自動配置  

---

## 📝 まとめ
- **Temporal** → 「どうスピードが変わるか」  
- **Spatial** → 「どの道を通るか」  
- **Roving** → 「横軸の位置（タイミング）をAEが均等化する」  

👉 Roving は **時間の座標そのものを可変にする特殊モード**。  
普通のキーとは次元が違う補間要素。  
